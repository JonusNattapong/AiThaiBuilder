# คู่มือการตรวจสอบคุณภาพข้อมูลขั้นสูง

โมดูลนี้ใช้สำหรับการตรวจสอบคุณภาพข้อมูลภาษาไทยขั้นสูง ซึ่งประกอบด้วยความสามารถหลัก 3 ด้าน:

1. การตรวจจับความผิดเพี้ยนของข้อมูล (Hallucination Detection)
2. การตรวจสอบอคติและความเป็นกลางในข้อมูล (Bias and Fairness Analysis)
3. การตรวจสอบความซ้ำซ้อนของข้อมูล (Duplication Detection)

## การติดตั้ง

ติดตั้งแพ็คเกจที่จำเป็นโดยใช้คำสั่ง:

```bash
pip install -r requirements.txt
```

## การใช้งาน

### 1. การใช้งานพื้นฐาน

```bash
python check_dataset_quality.py --input_file path/to/your/dataset.csv --advanced
```

### 2. การใช้ข้อมูลอ้างอิงสำหรับตรวจสอบความผิดเพี้ยน

```bash
python check_dataset_quality.py --input_file dataset.csv --advanced --reference_file reference_data.json
```

### 3. ปรับค่า threshold สำหรับการตรวจสอบความซ้ำซ้อน

```bash
python check_dataset_quality.py --input_file dataset.csv --advanced --similarity_threshold 0.75
```

### 4. ใช้งานเฉพาะการตรวจสอบขั้นสูง

```bash
python advanced_quality_check.py --input_file dataset.csv
```

## พารามิเตอร์

- `--input_file`: ไฟล์ CSV ที่ต้องการตรวจสอบ (จำเป็น)
- `--output_dir`: ไดเรกทอรีสำหรับบันทึกผลลัพธ์ (ค่าเริ่มต้น: 'analysis_output')
- `--advanced`: เปิดใช้การตรวจสอบขั้นสูง
- `--reference_file`: ไฟล์ JSON/YAML ที่มีข้อมูลอ้างอิงสำหรับตรวจสอบความผิดเพี้ยน
- `--similarity_threshold`: ค่าเกณฑ์สำหรับการตรวจสอบความซ้ำซ้อน (0.0-1.0, ค่าเริ่มต้น: 0.85)
- `--text_column`: ชื่อคอลัมน์ที่มีข้อความที่ต้องการตรวจสอบ (ค่าเริ่มต้น: 'text')

## รูปแบบข้อมูลอ้างอิง

ไฟล์ JSON/YAML สำหรับข้อมูลอ้างอิงควรมีโครงสร้างดังนี้:

```json
{
  "entities": {
    "organizations": ["องค์กร1", "องค์กร2", ...],
    "places": ["สถานที่1", "สถานที่2", ...],
    "persons": ["บุคคล1", "บุคคล2", ...]
  },
  "facts": {
    "key1": "ข้อเท็จจริง1",
    "key2": "ข้อเท็จจริง2",
    ...
  }
}
```

## ผลลัพธ์

ผลลัพธ์ประกอบด้วย:

1. **การตรวจสอบความผิดเพี้ยนของข้อมูล**
   - ค่าคะแนนความผิดเพี้ยนเฉลี่ย
   - ตัวอย่างที่มีความเสี่ยงสูง
   - เปอร์เซ็นต์ข้อมูลที่มีตัวบ่งชี้ความผิดเพี้ยน
   - กราฟแสดงการกระจายคะแนนความผิดเพี้ยน

2. **การตรวจสอบอคติและความเป็นกลาง**
   - จำนวนตัวอย่างที่พบอคติ
   - ประเภทอคติที่พบ
   - การวิเคราะห์ sentiment
   - กราฟแสดงประเภทอคติที่พบ
   - กราฟแสดงการกระจายของ sentiment

3. **การตรวจสอบความซ้ำซ้อนของข้อมูล**
   - จำนวนข้อความซ้ำซ้อน
   - จำนวนข้อความคล้ายคลึง
   - คะแนนความหลากหลาย
   - กราฟแสดงเครือข่ายความคล้ายคลึง
   - กราฟแสดงการกระจายคะแนนความซ้ำซ้อน

## การปรับแต่ง

### การเพิ่มคำที่บ่งชี้อคติ

สามารถปรับแต่งรายการคำที่บ่งชี้อคติในฟังก์ชัน `load_bias_lexicon()` ในไฟล์ `advanced_quality_check.py`

### การปรับเปลี่ยนเกณฑ์ความผิดเพี้ยน

สามารถปรับแต่งเกณฑ์ในฟังก์ชัน `detect_hallucination_markers()` ในไฟล์ `advanced_quality_check.py`
